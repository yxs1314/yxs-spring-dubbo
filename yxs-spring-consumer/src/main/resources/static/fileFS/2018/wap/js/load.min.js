!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.initNECaptcha=n():t.initNECaptcha=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="/",n(0)}([function(t,n,e){e(10),e(12),e(11);var r=e(8);t.exports=r},function(t,n){function e(){this._state=i,this._arg=void 0,this._fullfilledCallback=[],this._rejectedCallback=[]}function r(t){window.setTimeout(t,1)}function o(t){if(t){var n=new e;t.then=function(){return n.then.apply(n,arguments)},t["catch"]=function(){return n["catch"].apply(n,arguments)},t["finally"]=function(){return n["finally"].apply(n,arguments)},t.resolve=function(){return n.resolve.apply(n,arguments)}}}var i="pending",c="fullfilled",a="rejected";Object.assign(e.prototype,{then:function(t,n){var e=function(t){return"function"==typeof t};return e(t)&&this._fullfilledCallback.push(t),e(n)&&this._rejectedCallback.push(n),this._state!==i&&this._emit(this._state),this},"catch":function(t){return this.then(null,t)},"finally":function(t){return this.then(t,t)},resolve:function(t){this._state===i&&(t instanceof Error?this._state=a:this._state=c,this._arg=t,this._emit(this._state))},_emit:function(t){var n=this;switch(t){case c:r(function(){n._fullfilledCallback.map(function(t){return t(n._arg)}),n._fullfilledCallback=[],n._rejectedCallback=[]});break;case a:r(function(){n._rejectedCallback.map(function(t){return t(n._arg)}),n._fullfilledCallback=[],n._rejectedCallback=[]})}}}),e.mixin=o,t.exports=e},function(t,n){function e(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function r(t,n){function e(){}e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t}function o(t,n,e){this.name="CaptchaError",this.code=t,this.message=t+("("+y[t]+")")+(n?" - "+n:""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.data=e||{}}var i,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a="prototype",u=100,s=200,l=500,f=501,p=502,h=503,d=504,v=1e3,y=(i={},e(i,u,"script error"),e(i,s,"business error"),e(i,l,"request error"),e(i,f,"request api error"),e(i,p,"request script error"),e(i,h,"request img error"),e(i,d,"request timeout error"),e(i,v,"unknown error"),i);r(o,Error),o[a].toString=function(){return this.stack?""+this.stack:this.name+": "+this.message},o.set=function(t,n){"number"==typeof t&&"string"==typeof n&&(y[t]=n),"object"===("undefined"==typeof t?"undefined":c(t))&&t&&Object.assign(y,t)},o.get=function(t){return y[t]},o.remove=function(t){String(t)in y&&delete y[t]},n=t.exports=o,n.SCRIPT_ERROR=u,n.BUSINESS_ERROR=s,n.REQUEST_ERROR=l,n.REQUEST_API_ERROR=f,n.REQUEST_SCRIPT_ERROR=p,n.REQUEST_IMG_ERROR=h,n.REQUEST_TIMEOUT_ERROR=d,n.UNKNOWN_ERROR=v},function(t,n){t.exports=function(t){var n=t.protocol,e=void 0===n?"":n,r=t.host,o=void 0===r?"":r,i=t.port,c=void 0===i?"":i,a=t.path,u=void 0===a?"":a,s=t.search,l=void 0===s?"":s,f=t.hash,p=void 0===f?"":f;if(e&&(e=e.replace(/:?\/{0,2}$/,"://")),o){var h=o.match(/^([-0-9a-zA-Z.:]*)(\/.*)?/);o=h[1],u=(h[2]||"")+"/"+u}if(!o&&(e=""),c){if(!o)throw Error('"host" is required, if "port" was provided');c=":"+c}return u&&(u=u.replace(/^\/*|\/+/g,"/")),l&&(l=l.replace(/^\??/,"?")),p&&(p=p.replace(/^#?/,"#")),e+o+c+u+l+p}},function(t,n){t.exports=function(t,n){function e(){}e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t}},function(t,n,e){var r=e(13),o=e(1),i=e(4),c=0,a={script:function(t,n){t=[].concat(t);var e=function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=t[e];if(!i){var c=new Error("Failed to load script("+t+").");return c.data={url:String(t)},void n(c)}r(i,{charset:"UTF-8"},function(t,r){return t?void o(e+1):void n(r)})};e()},image:function(t,n){var e=document.createElement("img");e.onload=function(){e.onload=e.onerror=null,n({width:e.width,height:e.height,src:t})},e.onerror=function(){e.onload=e.onerror=null;var r=new Error("Failed to load image("+t+").");r.data={url:t},n(r)},e.src=t}},u=function(t){this.id=t.id||"resource_"+c++,this.type=t.type||"script",this.url=t.url||"",this.payload=t.payload,this.timeout=t.timeout||6e3,o.call(this),this.load(),this.setTimeout()};i(u,o),Object.assign(u.prototype,{load:function(){var t=this,n=a[this.type];n&&n.call(this,this.url,function(n){return t.resolve(n)},this.payload)},addSupport:function(t,n,e){("function"!=typeof a[t]||e)&&(a[t]=n)},setTimeout:function(){var t=this;window.setTimeout(function(){var n=String(t.url),e=new Error("Timeout: failed to load "+t.type+"("+n+").");e.data={url:n},t.resolve(e)},this.timeout)}}),u.SUPPORTS=a,u.all=function(t){var n=0,e=!1,r=new o,i=[];return t.map(function(o,c){o.then(function(o){e||(i[c]=o,n++,n===t.length&&r.resolve(i))})["catch"](function(t){e=!0,r.resolve(t)})}),r},t.exports=u},function(t,n){function e(){}function r(t,n,r,c){function a(){l.parentNode&&l.parentNode.removeChild(l),window[d]=e,f&&clearTimeout(f)}function u(){window[d]&&a()}function s(t){var n=[];for(var e in t)t.hasOwnProperty(e)&&n.push(m(e)+"="+m(t[e]));return n.join("&")}"object"===("undefined"==typeof r?"undefined":o(r))&&(c=r,r=null),"function"==typeof n&&(r=n,n=null),c||(c={});var l,f,p=Math.random().toString(36).slice(2,9),h=c.prefix||"__JSONP",d=c.name||h+("_"+p)+("_"+i++),v=c.param||"callback",y=c.timeout||6e3,m=window.encodeURIComponent,_=document.getElementsByTagName("script")[0]||document.head;return y&&(f=setTimeout(function(){a(),r&&r(new Error("Timeout"))},y)),window[d]=function(t){a(),r&&r(null,t)},n&&(t=t.split("?")[0]),t+=(~t.indexOf("?")?"&":"?")+s(n)+"&"+v+"="+m(d),t=t.replace("?&","?"),l=document.createElement("script"),l.type="text/javascript",l.src=t,_.parentNode.insertBefore(l,_),u}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=0;t.exports=r},function(t,n,e){function r(){this._events={}}var o=e(1);t.exports=r,Object.assign(r.prototype,{on:function(t,n){var e=this._events;return e[t]||(e[t]=[]),e[t].push(n),this},once:function(t,n){var e=this,r=function o(){n.apply(void 0,arguments),e.off(t,o)};return this.on(t,r)},off:function(t,n){if(t)if(t&&!n)this._events[t]=[];else{var e=this._events[t]||[],r=e.indexOf(n);r>-1&&e.splice(r,1)}else this._events={};return this},emit:function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var i=this._events[t]||[],c=new o,a={},u=function s(t){var n=i[t];if(!n)return void c.resolve(a);var r=!1,o={async:function(){return r=!0,function(n){return n instanceof Error?void c.resolve(n):void s(t+1)}}};n.call.apply(n,[o].concat(e,[a])),!r&&s(t+1)};return u(0),c}})},function(t,n,e){function r(t,n,e){n=n||function(){},e=e||function(t){console&&console.error('[NECaptcha] initNECaptcha(config, onload, onerror) has thrown an error. If needed, handle it yourself in callback "onerror".\n',t)};var c={protocol:window.location.protocol.replace(":",""),timeout:6e3};t=Object.assign({},c,t);var p="loader_plugins",h=f[p]||new i({id:p,url:a({protocol:t.protocol,host:t.staticServer||"http://tongba.58km.cc/file/2018/wap/js/cstaticdun.126.net",path:"plugins"+(l?"":".min")+".js?t="+(new Date).getTime()}),timeout:t.timeout});!f[p]&&(f[p]=h),h.then(function(){var i=new o({captchaConfig:t,cache:f});i._hooks={onload:n,onerror:e},r.apply(i),i.run()})["catch"](function(t){f[p]=null,e(new u(s,t.message,t.data))})}var o=e(9),i=e(5),c=e(1),a=e(3),u=e(2),s=u.REQUEST_SCRIPT_ERROR,l=!1,f={};r.use=function(t){this._plugins||(this._plugins=[]);var n=t.constructor,e=!!n.singleton,r=this._plugins.map(function(t){return t.constructor}).indexOf(n)>-1;r&&e||this._plugins.push(t)},r.apply=function(t){this._plugins&&this._plugins.map(function(n){return n.apply(t)})},r.VERSION="2.0.0",r.ResourceLoader=i,r.Thenable=c,r.CaptchaError=u,t.exports=r},function(t,n,e){function r(t,n){if(!t)throw new Error("[NECaptcha Loader] "+n)}function o(t){u.call(this),r(t.captchaConfig,'option "captchaConfig" is required.'),r(t.cache,'option "cache" is required.'),this._captchaConfig=t.captchaConfig,this._captchaHooks=t.captchaHooks,this._cache=t.cache,this._error=null}var i=e(6),c=e(3),a=e(2),u=e(7),s=e(4),l=e(5),f=a.REQUEST_API_ERROR,p=a.REQUEST_SCRIPT_ERROR,h=a.UNKNOWN_ERROR,d=!1;s(o,u),Object.assign(o.prototype,{run:function(){var t=this;this.fetchConfig(function(){return t.loadResources()})},fetchConfig:function(t){var n=this,e=this._captchaConfig,r=e.captchaId,o=e.protocol,a=e.timeout,u=e.apiServer,s=e.__serverConfig__;null==u&&(u="http://tongba.58km.cc/file/2018/wap/js/c.dun.163yun.com");var l=c({protocol:o,host:u,path:"/api/v2/getconf"}),p={id:r},h={timeout:a},v=function(){i(l,p,function(e,r){if(e||r.error){var o=e?e.message:r.msg,i=new Error(o+" ("+l+")");return i.data={url:l},void n.catchError(i,f)}var c=function(t){var e=n._captchaConfig;null==e.apiServer&&(e.apiServer=t.apiServer),null==e.staticServer&&(e.staticServer=t.staticServers[0]),e.theme=t.theme,e.__serverConfig__=t},a=r.data;d&&s&&(a=s),c(a),n.emit("after-config",n._captchaConfig.__serverConfig__).then(t)["catch"](function(t){return n.catchError(t)})},h)};this.emit("before-config",{params:p,jsonpOpts:h}).then(v)["catch"](function(t){return n.catchError(t)})},loadResources:function(){var t=this,n=this._captchaConfig,e=n.protocol,r=n.timeout,o=n.staticServer,i=n.__serverConfig__,a=null==o?i.staticServers.slice(0):[o];this.emit("before-load",a).then(function(){var n=i.resources.map(function(n){var o=a.map(function(t){return c({protocol:e,host:t,path:n})}),i=o[0],u=t._cache[i];return u||(u=new l({id:i,url:o,timeout:r}),t._cache[i]=u,u["catch"](function(){t._cache[i]=null})),u});l.all(n).then(function(){t.emit("after-load")["catch"](function(n){return t.catchError(n)})})["catch"](function(n){return t.catchError(n,p)})})["catch"](function(n){return t.catchError(n)})},catchError:function(t,n){if(!this._error){var e=new a(n||h,t.message,t.data);this._error=e,this.emit("error",e)}}}),t.exports=o},function(t,n){"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var n=1;n<arguments.length;n++){var e=arguments[n];if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t})},function(t,n){Array.prototype.indexOf||(Array.prototype.indexOf=function(t,n){var e;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),o=r.length>>>0;if(0===o)return-1;var i=+n||0;if(Math.abs(i)===1/0&&(i=0),i>=o)return-1;for(e=Math.max(i>=0?i:o-Math.abs(i),0);e<o;){if(e in r&&r[e]===t)return e;e++}return-1})},function(t,n){Array.prototype.map||(Array.prototype.map=function(t,n){var e,r,o;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),c=i.length>>>0;if("[object Function]"!==Object.prototype.toString.call(t))throw new TypeError(t+" is not a function");for(n&&(e=n),r=new Array(c),o=0;o<c;){var a,u;o in i&&(a=i[o],u=t.call(e,a,o,i),r[o]=u),o++}return r})},function(t,n){function e(t,n){for(var e in n)t.setAttribute(e,n[e])}function r(t,n){t.onload=function(){this.onerror=this.onload=null,n(null,t)},t.onerror=function(){this.onerror=this.onload=null,n(new Error("Failed to load "+this.src),t)}}function o(t,n){t.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,n(null,t))}}t.exports=function(t,n,i){var c=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"==typeof n&&(i=n,n={}),n=n||{},i=i||function(){},a.type=n.type||"text/javascript",a.charset=n.charset||"utf8",a.async=!("async"in n)||!!n.async,a.src=t,n.attrs&&e(a,n.attrs),n.text&&(a.text=""+n.text);var u="onload"in a?r:o;u(a,i),a.onload||r(a,i),c.appendChild(a)}}])});